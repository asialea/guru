{"ast":null,"code":"var _jsxFileName = \"/Users/asiataylor/Development/env1/django-drf-react/project/frontend/src/components/forms/AboutUser.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { headers, uploadConfig } from './global.js';\nimport { FaGithub, FaLinkedin, FaTwitter, FaPlus, FaCamera, FaFacebook, FaLink } from 'react-icons/fa';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport IconButton from '@material-ui/core/IconButton';\n\nclass AboutUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      aboutUser: {},\n      avi: {},\n      url: null,\n      site: null\n    };\n\n    this.uploadWidget = e => {\n      //delete existing profile pic from cloud storage\n      var delete_data = {\n        'user_id': this.props.user.id\n      };\n      fetch(\"/api/avi/\".concat(this.props.user.id, \"/\"), {\n        method: 'POST',\n        body: JSON.stringify(delete_data),\n        headers\n      }).then(response => {\n        return response.json();\n      }).then(json => this.setState({\n        avi: json\n      })).catch(err => {\n        console.log(\"fetch error\" + err);\n      }); // set new profile pic\n\n      uploadConfig['public_id'] = this.props.user.id;\n      window.cloudinary.openUploadWidget(uploadConfig, function (error, result) {\n        if (result) {\n          var data = {\n            'avi_path': result[0].url,\n            'user_id': result[0].public_id\n          };\n          fetch(\"/api/avi/\".concat(result[0].public_id), {\n            method: \"PUT\",\n            body: JSON.stringify(data),\n            headers: headers\n          }).then(function (response) {\n            return response.text();\n          }, function (error) {\n            console.log(error);\n          });\n        }\n      });\n    };\n\n    this.aboutSave = e => {\n      e.preventDefault();\n      this.props.fetchAvi();\n      delete this.state.aboutUser['user_id'];\n      this.updateAboutUser(this.state.aboutUser);\n      this.props.show();\n    };\n  }\n\n  updateAboutUser(user) {\n    let body = JSON.stringify(user);\n    headers[\"Authorization\"] = \"Token \".concat(this.props.token);\n    fetch(\"/api/aboutUser/\", {\n      headers,\n      body,\n      method: \"PATCH\",\n      mode: \"same-origin\"\n    }).then(() => this.props.fetchAboutUser());\n  }\n\n  handleChange(param, value) {\n    let updatedUser = this.state.aboutUser;\n    updatedUser[param] = value;\n    this.setState({\n      aboutUser: updatedUser\n    });\n    console.log(updatedUser);\n  }\n\n  render() {\n    var aboutUser = this.props.aboutUser;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.props.hidden ? 'hidden' : 'form',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.aboutSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-flex-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      onClick: this.uploadWidget,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(FaCamera, {\n      color: \"#374054\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      defaultValue: \"http://\",\n      id: \"url\",\n      className: \"input-small\",\n      maxLength: \"200\",\n      placeholder: \"Url\",\n      type: \"text\",\n      onChange: e => this.setState({\n        url: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      className: \"input-small\",\n      onChange: e => this.setState({\n        site: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"github\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Github\"), React.createElement(\"option\", {\n      value: \"linkedin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Linkedin\"), React.createElement(\"option\", {\n      value: \"twitter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Twitter\"), React.createElement(\"option\", {\n      value: \"facebook\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Facebook\"), React.createElement(\"option\", {\n      value: \"personal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Personal\")), React.createElement(IconButton, {\n      className: \"expand\",\n      onClick: e => {\n        this.handleChange(this.state.site, this.state.url);\n        alert(\"Url added\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(FaPlus, {\n      color: \"#374054\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))), React.createElement(\"input\", {\n      defaultValue: aboutUser.location,\n      className: \"about-input\",\n      onChange: e => this.handleChange(\"location\", e.target.value),\n      maxLength: \"30\",\n      placeholder: \"Location\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(TextareaAutosize, {\n      defaultValue: aboutUser.bio,\n      onChange: e => this.handleChange(\"bio\", e.target.value),\n      maxLength: \"500\",\n      placeholder: \"Bio\",\n      minRows: 1,\n      maxRows: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Save\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"social\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.props.aboutUser.github !== \"\" ? React.createElement(\"a\", {\n      href: this.props.aboutUser.github,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(FaGithub, {\n      className: \"social-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })) : null, this.props.aboutUser.linkedin !== \"\" ? React.createElement(\"a\", {\n      href: this.props.aboutUser.linkedin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(FaLinkedin, {\n      className: \"social-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })) : null, this.props.aboutUser.twitter !== \"\" ? React.createElement(\"a\", {\n      href: this.props.aboutUser.twitter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(FaTwitter, {\n      className: \"social-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })) : null, this.props.aboutUser.facebook !== \"\" ? React.createElement(\"a\", {\n      href: this.props.aboutUser.facebook,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(FaFacebook, {\n      className: \"social-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })) : null, this.props.aboutUser.personal !== \"\" ? React.createElement(\"a\", {\n      href: this.props.aboutUser.personal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(FaLink, {\n      className: \"social-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })) : null), React.createElement(\"article\", {\n      id: \"bio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"desc res-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.props.aboutUser.bio))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    user: state.auth.user\n  };\n};\n\nexport default connect(mapStateToProps)(AboutUser);","map":{"version":3,"sources":["/Users/asiataylor/Development/env1/django-drf-react/project/frontend/src/components/forms/AboutUser.js"],"names":["React","Component","connect","headers","uploadConfig","FaGithub","FaLinkedin","FaTwitter","FaPlus","FaCamera","FaFacebook","FaLink","TextareaAutosize","IconButton","AboutUser","state","aboutUser","avi","url","site","uploadWidget","e","delete_data","props","user","id","fetch","method","body","JSON","stringify","then","response","json","setState","catch","err","console","log","window","cloudinary","openUploadWidget","error","result","data","public_id","text","aboutSave","preventDefault","fetchAvi","updateAboutUser","show","token","mode","fetchAboutUser","handleChange","param","value","updatedUser","render","hidden","target","alert","location","bio","github","linkedin","twitter","facebook","personal","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from \"react-redux\";\nimport {headers,uploadConfig} from './global.js'\nimport {FaGithub,FaLinkedin,FaTwitter,FaPlus,FaCamera,FaFacebook,FaLink} from 'react-icons/fa';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport IconButton from '@material-ui/core/IconButton';\n\n\nclass AboutUser extends Component {\n\n  state = {\n    aboutUser:{},\n    avi:{},\n    url:null,\n    site:null,\n  }\n\n  uploadWidget=(e)=> {\n    //delete existing profile pic from cloud storage\n    var delete_data={'user_id':this.props.user.id};\n    fetch(`/api/avi/${this.props.user.id}/`,{method:'POST',body: JSON.stringify(delete_data),headers,})\n      .then(response => { return response.json();}).then (json =>this.setState({avi: json}))\n      .catch(err => {console.log(\"fetch error\" + err);\n       });\n    // set new profile pic\n    uploadConfig['public_id']=this.props.user.id;\n    window.cloudinary.openUploadWidget(uploadConfig,function(error, result) {\n            if(result){\n              var data={'avi_path':result[0].url,'user_id':result[0].public_id,};\n              fetch(`/api/avi/${result[0].public_id}`, {method: \"PUT\",body: JSON.stringify(data),headers:headers})\n                .then(function(response) {\n                      return response.text()\n                    }, function(error) {\n                        console.log(error);})\n                    }\n                  });\n                }\n\n  updateAboutUser(user){\n    let body = JSON.stringify(user);\n    headers[\"Authorization\"] = `Token ${this.props.token}`;\n    fetch(\"/api/aboutUser/\", {headers,body,method:\"PATCH\",mode:\"same-origin\"})\n      .then(()=>this.props.fetchAboutUser())\n  }\n\n\n  aboutSave = (e) => {\n    e.preventDefault();\n    this.props.fetchAvi();\n    delete this.state.aboutUser['user_id'];\n    this.updateAboutUser(this.state.aboutUser);\n    this.props.show();\n  }\n\n\n  handleChange(param,value){\n    let updatedUser = this.state.aboutUser;\n    updatedUser[param]=value;\n    this.setState({aboutUser:updatedUser})\n    console.log(updatedUser)\n  }\n\n  render () {\n    var aboutUser=this.props.aboutUser;\n      return (\n        <div>\n        <div className=\"flex-box\">\n        </div>\n        <div className={this.props.hidden ? 'hidden':'form'}>\n          <form  onSubmit={this.aboutSave}>\n          <div className=\"input-flex-2\">\n            <IconButton onClick={this.uploadWidget}><FaCamera color=\"#374054\"/></IconButton>\n            <input defaultValue=\"http://\" id=\"url\" className=\"input-small\"\n            maxLength=\"200\" placeholder=\"Url\" type=\"text\" onChange={e => this.setState({url:e.target.value})}/>\n            <select className=\"input-small\" onChange={e => this.setState({site:e.target.value})}>\n              <option value=\"\"></option>\n              <option value=\"github\">Github</option>\n              <option value=\"linkedin\">Linkedin</option>\n              <option value=\"twitter\">Twitter</option>\n              <option value=\"facebook\">Facebook</option>\n              <option value=\"personal\">Personal</option>\n            </select>\n            <IconButton className=\"expand\" onClick={e => {this.handleChange(this.state.site,this.state.url); alert(\"Url added\")}}>\n            <FaPlus color=\"#374054\"/></IconButton>\n\n          </div>\n\n           <input defaultValue={aboutUser.location} className=\"about-input\" onChange={e => this.handleChange(\"location\",e.target.value)}\n           maxLength=\"30\" placeholder=\"Location\" type=\"text\"/>\n\n           <TextareaAutosize defaultValue={aboutUser.bio} onChange={e => this.handleChange(\"bio\",e.target.value)} maxLength=\"500\"\n           placeholder=\"Bio\" minRows={1} maxRows={1}/>\n           <button className =\"submit\">Save</button>\n          </form>\n        </div>\n        <div>\n          <span className=\"social\">\n            {this.props.aboutUser.github !== \"\" ? <a href={this.props.aboutUser.github}><FaGithub className=\"social-icon\"/></a> : null}\n            {this.props.aboutUser.linkedin !== \"\" ? <a href={this.props.aboutUser.linkedin}><FaLinkedin className=\"social-icon\"/></a> :null}\n            {this.props.aboutUser.twitter !== \"\" ? <a href={this.props.aboutUser.twitter}><FaTwitter className=\"social-icon\"/></a>:null}\n            {this.props.aboutUser.facebook !== \"\" ? <a href={this.props.aboutUser.facebook}><FaFacebook className=\"social-icon\"/></a>:null}\n            {this.props.aboutUser.personal !== \"\" ? <a href={this.props.aboutUser.personal}><FaLink className=\"social-icon\"/></a>:null}\n\n          </span>\n          <article id=\"bio\">\n            <p className=\"desc res-item\">{this.props.aboutUser.bio}</p>\n          </article>\n        </div>\n      </div>\n      );\n    }\n    }\n\n\nconst mapStateToProps = state => {\n  return {\n    token:state.auth.token,\n    user: state.auth.user,\n  };\n}\n\nexport default connect(mapStateToProps)(AboutUser);\n"]},"metadata":{},"sourceType":"module"}