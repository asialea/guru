{"ast":null,"code":"var _jsxFileName = \"/Users/asiataylor/Development/env1/django-drf-react/project/frontend/src/components/forms/AboutUser.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport '../static/AboutForm.css';\nimport { headers, uploadConfig } from './global.js';\nimport { FaGithub, FaLinkedin, FaTwitter, FaEdit, FaCode, FaUser, FaHome } from 'react-icons/fa';\nimport IconButton from '@material-ui/core/IconButton';\n\nclass AboutUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      aboutUser: {},\n      avi: {},\n      hidden: true\n    };\n\n    this.show = e => {\n      this.setState({\n        hidden: !this.state.hidden\n      });\n    };\n\n    this.uploadWidget = e => {\n      //delete existing profile pic from cloud storage\n      var delete_data = {\n        'user_id': this.props.user.id\n      };\n      fetch(\"/api/avi/\".concat(this.props.user.id, \"/\"), {\n        method: 'POST',\n        body: JSON.stringify(delete_data),\n        headers\n      }).then(response => {\n        return response.json();\n      }).then(json => this.setState({\n        avi: json\n      })).catch(err => {\n        console.log(\"fetch error\" + err);\n      }); // set new profile pic\n\n      uploadConfig['public_id'] = this.props.user.id;\n      window.cloudinary.openUploadWidget(uploadConfig, function (error, result) {\n        if (result) {\n          var data = {\n            'avi_path': result[0].url,\n            'user_id': result[0].public_id\n          };\n          fetch(\"/api/avi/\".concat(result[0].public_id), {\n            method: \"PUT\",\n            body: JSON.stringify(data),\n            headers: headers\n          }).then(function (response) {\n            return response.text();\n          }, function (error) {\n            console.log(error);\n          });\n        }\n      });\n    };\n\n    this.aboutSave = e => {\n      e.preventDefault();\n      this.fetchAvi();\n      delete this.state.aboutUser['user_id'];\n      this.updateAboutUser(this.state.aboutUser);\n      this.show();\n    };\n  }\n\n  updateAboutUser(user) {\n    let body = JSON.stringify(user);\n    headers[\"Authorization\"] = \"Token \".concat(this.props.token);\n    fetch(\"/api/aboutUser/\", {\n      headers,\n      body,\n      method: \"PUT\",\n      mode: \"same-origin\"\n    }).then(res => res.json());\n  }\n\n  parse_type(type) {\n    return type === 'MR' ? 'Mentor' : 'Mentee';\n  }\n\n  fetchAvi() {\n    fetch(\"/api/avi/\".concat(this.props.user.id, \"/\")).then(response => {\n      return response.json();\n    }).then(json => this.setState({\n      avi: json\n    })).catch(err => {\n      console.log(\"fetch error\" + err);\n    });\n  }\n\n  fetchAboutUser() {\n    fetch(\"/api/aboutUser/\".concat(this.props.user.username, \"/\")).then(response => {\n      return response.json();\n    }).then(json => this.setState({\n      aboutUser: json\n    })).catch(err => {\n      console.log(\"fetch error\" + err);\n    });\n  }\n\n  handleChange(param, value) {\n    let updatedUser = this.state.aboutUser;\n    updatedUser[param] = value;\n    this.setState({\n      aboutUser: updatedUser\n    });\n  }\n\n  componentWillMount() {\n    this.fetchAvi();\n    this.fetchAboutUser();\n  }\n\n  render() {\n    var proPic = {\n      backgroundImage: 'url(' + this.state.avi.avi_path + ')'\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      id: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.props.user.first_name, \" \", this.props.user.last_name), React.createElement(\"div\", {\n      id: \"pro-pic\",\n      style: proPic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: this.state.hidden ? 'hidden' : 'form',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.uploadWidget,\n      id: \"pro-upload\",\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Pro Pic\"), React.createElement(\"form\", {\n      onSubmit: this.aboutSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input-small\",\n      onChange: e => this.handleChange(\"github\", e.target.value),\n      maxLength: \"200\",\n      placeholder: \"Github Url\",\n      type: \"url\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"input-small \",\n      onChange: e => this.handleChange(\"linkedin\", e.target.value),\n      maxLength: \"100\",\n      placeholder: \"Linkedin Url\",\n      type: \"url\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"input-small \",\n      onChange: e => this.handleChange(\"twitter_handle\", e.target.value),\n      maxLength: \"100\",\n      placeholder: \"Twitter Url\",\n      type: \"url\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      className: \"input-small\",\n      onChange: e => this.handleChange(\"location\", e.target.value),\n      maxLength: \"30\",\n      placeholder: \"Location\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      onChange: e => this.handleChange(\"bio\", e.target.value),\n      maxLength: \"500\",\n      placeholder: \"Bio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Save\"))), React.createElement(\"h1\", {\n      id: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.props.user.first_name, \" \", this.props.user.last_name, React.createElement(IconButton, {\n      onClick: this.show,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(FaEdit, {\n      className: \"about-expand\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), React.createElement(\"p\", {\n      className: \"caption\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(FaUser, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), \"@\", this.props.user.username), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(FaHome, {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), this.state.aboutUser.location), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(FaCode, {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), this.parse_type(this.props.user.type))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      id: \"bio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"desc res-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.aboutUser.bio)), React.createElement(\"div\", {\n      id: \"contact\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: this.state.aboutUser.github,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(FaGithub, {\n      className: \"social\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(\"a\", {\n      href: this.state.aboutUser.linkedin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(FaLinkedin, {\n      className: \"social\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(\"a\", {\n      href: this.state.aboutUser.twitter_handle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(FaTwitter, {\n      className: \"social\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    user: state.auth.user\n  };\n};\n\nexport default connect(mapStateToProps)(AboutUser);","map":{"version":3,"sources":["/Users/asiataylor/Development/env1/django-drf-react/project/frontend/src/components/forms/AboutUser.js"],"names":["React","Component","connect","headers","uploadConfig","FaGithub","FaLinkedin","FaTwitter","FaEdit","FaCode","FaUser","FaHome","IconButton","AboutUser","state","aboutUser","avi","hidden","show","e","setState","uploadWidget","delete_data","props","user","id","fetch","method","body","JSON","stringify","then","response","json","catch","err","console","log","window","cloudinary","openUploadWidget","error","result","data","url","public_id","text","aboutSave","preventDefault","fetchAvi","updateAboutUser","token","mode","res","parse_type","type","fetchAboutUser","username","handleChange","param","value","updatedUser","componentWillMount","render","proPic","backgroundImage","avi_path","first_name","last_name","target","location","bio","github","linkedin","twitter_handle","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from \"react-redux\";\nimport '../static/AboutForm.css';\nimport {headers,uploadConfig} from './global.js'\nimport {FaGithub,FaLinkedin,FaTwitter,FaEdit,FaCode,FaUser,FaHome} from 'react-icons/fa';\nimport IconButton from '@material-ui/core/IconButton';\n\nclass AboutUser extends Component {\n\n  state = {\n    aboutUser:{},\n    avi:{},\n    hidden:true,\n  }\n\n  show = (e) =>{\n    this.setState({hidden:!this.state.hidden});\n  }\n\n  uploadWidget=(e)=> {\n    //delete existing profile pic from cloud storage\n    var delete_data={'user_id':this.props.user.id};\n    fetch(`/api/avi/${this.props.user.id}/`,{method:'POST',body: JSON.stringify(delete_data),headers,})\n      .then(response => { return response.json();}).then (json =>this.setState({avi: json}))\n      .catch(err => {console.log(\"fetch error\" + err);\n       });\n    // set new profile pic\n    uploadConfig['public_id']=this.props.user.id;\n    window.cloudinary.openUploadWidget(uploadConfig,function(error, result) {\n            if(result){\n              var data={'avi_path':result[0].url,'user_id':result[0].public_id,};\n              fetch(`/api/avi/${result[0].public_id}`, {method: \"PUT\",body: JSON.stringify(data),headers:headers})\n                .then(function(response) {\n                      return response.text()\n                    }, function(error) {\n                        console.log(error);})\n                    }\n                  });\n                }\n\n  updateAboutUser(user){\n    let body = JSON.stringify(user);\n    headers[\"Authorization\"] = `Token ${this.props.token}`;\n    fetch(\"/api/aboutUser/\", {headers,body,method:\"PUT\",mode:\"same-origin\"})\n      .then(res => res.json())\n  }\n\n  parse_type(type){\n    return (type ==='MR' ? 'Mentor' : 'Mentee')\n  }\n\n  aboutSave = (e) => {\n    e.preventDefault();\n    this.fetchAvi();\n    delete this.state.aboutUser['user_id']\n    this.updateAboutUser(this.state.aboutUser)\n    this.show();\n  }\n\n  fetchAvi(){\n    fetch(`/api/avi/${this.props.user.id}/`)\n      .then(response => { return response.json();}).then(json =>this.setState({avi: json}))\n      .catch(err => {console.log(\"fetch error\" + err);});\n            }\n\n  fetchAboutUser(){\n    fetch(`/api/aboutUser/${this.props.user.username}/`)\n      .then(response => { return response.json();}).then(json =>this.setState({aboutUser: json}))\n      .catch(err => {console.log(\"fetch error\" + err);})\n  }\n\n  handleChange(param,value){\n    let updatedUser = this.state.aboutUser;\n    updatedUser[param]=value;\n    this.setState({aboutUser:updatedUser})\n  }\n\n  componentWillMount(){\n      this.fetchAvi();\n      this.fetchAboutUser();\n    }\n\n  render () {\n    var proPic = {backgroundImage:'url(' + this.state.avi.avi_path + ')'};\n      return (\n        <div>\n        <div className=\"flex-box\">\n          <h1 id=\"name\">{this.props.user.first_name} {this.props.user.last_name}</h1>\n          <div id=\"pro-pic\" style={proPic}></div>\n        </div>\n        <div className={this.state.hidden ? 'hidden':'form'}>\n        <button onClick={this.uploadWidget} id=\"pro-upload\" className=\"submit\">Pro Pic</button>\n            <form  onSubmit={this.aboutSave}>\n               <div className=\"form-group\">\n                <input className=\"input-small\" onChange={e => this.handleChange(\"github\",e.target.value)}\n                maxLength=\"200\" placeholder=\"Github Url\" type=\"url\"/>\n                <input className=\"input-small \" onChange={e => this.handleChange(\"linkedin\",e.target.value)}\n                maxLength=\"100\" placeholder=\"Linkedin Url\" type=\"url\"/>\n                <input className=\"input-small \" onChange={e => this.handleChange(\"twitter_handle\",e.target.value)}\n                maxLength=\"100\" placeholder=\"Twitter Url\" type=\"url\"/>\n               </div>\n               <input className=\"input-small\" onChange={e => this.handleChange(\"location\",e.target.value)}\n               maxLength=\"30\" placeholder=\"Location\" type=\"text\"/>\n\n               <textarea onChange={e => this.handleChange(\"bio\",e.target.value)} maxLength=\"500\" placeholder=\"Bio\"></textarea>\n               <button className =\"submit\">Save</button>\n            </form>\n        </div>\n            <h1 id=\"name\">{this.props.user.first_name} {this.props.user.last_name}\n              <IconButton onClick={this.show}><FaEdit  className=\"about-expand\"/></IconButton>\n            </h1>\n            <p className=\"caption\">\n              <span><FaUser/>@{this.props.user.username}</span>\n              <span><FaHome className=\"left\"/>{this.state.aboutUser.location}</span>\n              <span><FaCode className=\"left\"/>{this.parse_type(this.props.user.type)}</span>\n            </p>\n            <div>\n            <article id=\"bio\">\n              <p className=\"desc res-item\">{this.state.aboutUser.bio}</p>\n            </article>\n\n            <div  id=\"contact\">\n              <a href={this.state.aboutUser.github}><FaGithub className=\"social\"/></a>\n              <a href={this.state.aboutUser.linkedin}><FaLinkedin className=\"social\"/></a>\n              <a href={this.state.aboutUser.twitter_handle}><FaTwitter className=\"social\"/></a>\n            </div>\n            </div>\n        </div>\n      );\n    }\n    }\n\n\nconst mapStateToProps = state => {\n  return {\n    token:state.auth.token,\n    user: state.auth.user,\n  };\n}\n\nexport default connect(mapStateToProps)(AboutUser);\n"]},"metadata":{},"sourceType":"module"}